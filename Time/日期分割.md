```php

/**
     * 获取某年第几周的开始日期和结束日期
     *
     * @notice 不是非常精准
     * @param int $year 年份
     * @param int $week 第几周
     * @example weekday(2019, 38)
     */
    public static function weekday($year, $week = 1)
    {
        $year_start = mktime(0, 0, 0, 1, 1, $year);
        $year_end = mktime(0, 0, 0, 12, 31, $year);

        // 判断第一天是否为第一周的开始
        if (intval(date('W', $year_start)) === 1) {
            $start = $year_start;//把第一天做为第一周的开始
        } else {
            $week++;
            $start = strtotime('+1 monday', $year_start);//把第一个周一作为开始
        }

        // 第几周的开始时间
        if ($week === 1) {
            $weekday['start'] = $start;
        } else {
            $weekday['start'] = strtotime('+' . ($week - 0) . ' monday', $start);
        }

        // 第几周的结束时间
        $weekday['end'] = strtotime('+1 sunday', $weekday['start']);
        if (date('Y', $weekday['end']) != $year) {
            $weekday['end'] = $year_end;
        }

        // 获取格式化日期
        $weekday['start_date'] = date('Y-m-d H:i:s', $weekday['start']);
        $weekday['end_date'] = date('Y-m-d H:i:s', $weekday['end']);

        // 当前年/周
        $weekday['cur_week'] = date('oW', $weekday['start']);

        return $weekday;
    }

    /**
     * 获取指定日期段内每周的开始和结束时间
     *
     * @param $begin
     * @param $end
     * @throws JsonException
     * @example getDateFromWeekRange('2018-01-02', '2018-11-02')
     */
    public static function getDateFromWeekRange($begin, $end)
    {
        $begin = strtotime($begin);
        $end = strtotime($end);

        if (strtotime($begin) > strtotime($end)) {
            throw new JsonException(10000);
        }

        $begin_time = date('Y-m-d', $begin);
        $end_time = date('Y-m-d', $end);

        // 相差星期数
        $differ_days = Carbon::parse($begin_time)->diffInDays(Carbon::parse($end_time));
        $differ_week = ceil($differ_days / 7);

        // 开始日期 当周开始和结束的时间
        $arr_temp = Helper::getWeekRange(date('Y-m-d', strtotime($begin_time)), 1);

        $weeks = [];
        for ($i = 1; $i <= $differ_week + 3; $i++) {
            if ($i == 1) {
                if ($arr_temp['end'] < strtotime($begin_time)) {
                    continue;
                }
                $weeks[] = $arr_temp;
                continue;
            }

            $end = (int)$arr_temp['end'] + (86400 * 7);
            $arr_temp = Helper::getWeekRange(date('Y-m-d', $end), 1);

            if ($arr_temp['start'] > strtotime($end_time)) {
                break;
            }

            $weeks[] = $arr_temp;
        }

        return $weeks;
    }

    /**
     * 计算指定日期的一周开始及结束日期
     *
     * @param $date 2018-12-31
     * @param int $start 周几作为一周的开始 （1-6为周一~周六；0为周日；默认0）
     * @return array
     */
    public static function getWeekRange($date, $start = 0)
    {

        // 将日期转时间戳
        $dt = new \DateTime($date);
        $timestamp = $dt->format('U');

        // 获取日期是周几
        $day = (new \DateTime('@' . $timestamp))->format('w');

        // 计算开始日期
        if ($day >= $start) {
            $startdate_timestamp = mktime(0, 0, 0, date('m', $timestamp), date('d', $timestamp) - ($day - $start), date('Y', $timestamp));
        } elseif ($day < $start) {
            $startdate_timestamp = mktime(0, 0, 0, date('m', $timestamp), date('d', $timestamp) - 7 + $start - $day, date('Y', $timestamp));
        }

        // 结束日期=开始日期+6
        $enddate_timestamp = mktime(0, 0, 0, date('m', $startdate_timestamp), date('d', $startdate_timestamp) + 6, date('Y', $startdate_timestamp));

        $startdate = (new \DateTime('@' . $startdate_timestamp))->format('Y-m-d');
        $enddate = (new \DateTime('@' . $enddate_timestamp))->format('Y-m-d');

        return [
            'start' => strtotime($startdate),
            'end' => strtotime($enddate),
            'start_date' => $startdate,
            'end_date' => $enddate,
            'cur_week' => date('oW', strtotime($startdate)),
        ];
    }

    /**
     * 获取指定日期段内每一天的日期
     *
     * @param  Date $startdate 开始日期
     * @param  Date $enddate 结束日期
     * @return Array
     * @example $date = getDateFromRange('2016-02-25','2016-03-05');
     */
    public static function getDateFromRange($startdate, $enddate)
    {

        $stimestamp = strtotime($startdate);
        $etimestamp = strtotime($enddate);

        if ($stimestamp > $etimestamp) {
            throw new JsonException(10000);
        }

        // 计算日期段内有多少天
        $days = ($etimestamp - $stimestamp) / 86400 + 1;

        // 保存每天日期
        $date = array();

        for ($i = 0; $i < $days; $i++) {
            $date[] = date('Y-m-d', $stimestamp + (86400 * $i));
        }

        return $date;
    }
```
